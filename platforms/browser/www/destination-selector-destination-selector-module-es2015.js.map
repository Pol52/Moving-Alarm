{"version":3,"sources":["./src/app/destination-selector/destination-selector.page.html","./src/app/destination-selector/destination-selector-routing.module.ts","./src/app/destination-selector/destination-selector.module.ts","./src/app/destination-selector/destination-selector.page.scss","./src/app/destination-selector/destination-selector.page.ts"],"names":[],"mappings":"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","file":"destination-selector-destination-selector-module-es2015.js","sourcesContent":["module.exports = \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button></ion-back-button>\\n    </ion-buttons>\\n    <ion-title>Destinations</ion-title>\\n    <ion-buttons slot=\\\"primary\\\">\\n      <ion-button color=\\\"secondary\\\" fill=\\\"clear\\\" [routerLink]=\\\"['/map']\\\">\\n        <ion-icon slot=\\\"icon-only\\\" name=\\\"add-circle\\\"></ion-icon>\\n      </ion-button>\\n    </ion-buttons>    \\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <ion-list *ngIf=\\\"savedDestinations\\\">\\n    <ion-list-header>\\n      <h5 class=\\\"list-header\\\">\\n        Recent Destinations\\n      </h5>\\n    </ion-list-header>\\n    <ion-item-sliding *ngFor=\\\"let destination of savedDestinations; let i = index\\\">\\n      <ion-item button (click)=\\\"showDestinationConfirmationAlert(destination)\\\">\\n        <ion-avatar>\\n          <img src=\\\"../../assets/images/588891debc2fc2ef3a1860a2.png\\\">\\n        </ion-avatar>\\n        <ion-label class=\\\"item-label\\\">\\n          <h2>\\n            <strong>{{destination.extra.featureName}}</strong>\\n          </h2>\\n          <h5>\\n            {{destination.subAdminArea}}\\n          </h5>\\n        </ion-label>\\n      </ion-item>\\n      <ion-item-options side=\\\"end\\\">\\n        <ion-item-option color=\\\"danger\\\" (click)=\\\"deleteRecentDestination(i)\\\">\\n          <ion-icon name=\\\"trash\\\"></ion-icon> <span>Delete</span>\\n        </ion-item-option>\\n      </ion-item-options>\\n    </ion-item-sliding>    \\n  </ion-list>\\n</ion-content>\\n\"","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { DestinationSelectorPage } from './destination-selector.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: DestinationSelectorPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class DestinationSelectorPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { DestinationSelectorPageRoutingModule } from './destination-selector-routing.module';\n\nimport { DestinationSelectorPage } from './destination-selector.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    DestinationSelectorPageRoutingModule\n  ],\n  declarations: [DestinationSelectorPage]\n})\nexport class DestinationSelectorPageModule {}\n","module.exports = \".list-header {\\n  width: 100%;\\n  text-align: center;\\n  color: var(--ion-text-color);\\n}\\n\\n.item-label {\\n  padding-left: 20px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3BvbC9EZXNrdG9wL1VOSUZJL0h1bWFuQ29tcHV0ZXJJbnRlcmFjdGlvbi9Nb3ZpbmdBbGFybS9zcmMvYXBwL2Rlc3RpbmF0aW9uLXNlbGVjdG9yL2Rlc3RpbmF0aW9uLXNlbGVjdG9yLnBhZ2Uuc2NzcyIsInNyYy9hcHAvZGVzdGluYXRpb24tc2VsZWN0b3IvZGVzdGluYXRpb24tc2VsZWN0b3IucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksV0FBQTtFQUNBLGtCQUFBO0VBQ0EsNEJBQUE7QUNDSjs7QURFQTtFQUNJLGtCQUFBO0FDQ0oiLCJmaWxlIjoic3JjL2FwcC9kZXN0aW5hdGlvbi1zZWxlY3Rvci9kZXN0aW5hdGlvbi1zZWxlY3Rvci5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIubGlzdC1oZWFkZXJ7XG4gICAgd2lkdGg6MTAwJTtcbiAgICB0ZXh0LWFsaWduOmNlbnRlcjtcbiAgICBjb2xvcjogdmFyKC0taW9uLXRleHQtY29sb3IpO1xufVxuXG4uaXRlbS1sYWJlbHtcbiAgICBwYWRkaW5nLWxlZnQ6MjBweDtcbn0iLCIubGlzdC1oZWFkZXIge1xuICB3aWR0aDogMTAwJTtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuICBjb2xvcjogdmFyKC0taW9uLXRleHQtY29sb3IpO1xufVxuXG4uaXRlbS1sYWJlbCB7XG4gIHBhZGRpbmctbGVmdDogMjBweDtcbn0iXX0= */\"","import { Component, OnInit } from '@angular/core';\nimport { NativeStorage } from '@ionic-native/native-storage/ngx';\nimport { GeocoderResult } from '@ionic-native/google-maps/ngx';\nimport { LoadingController, AlertController } from '@ionic/angular';\nimport { PositionService } from '../service/position.service';\nimport { AlarmService } from '../service/alarm.service';\nimport { Router } from '@angular/router';\n\n@Component({\n  selector: 'app-destination-selector',\n  templateUrl: './destination-selector.page.html',\n  styleUrls: ['./destination-selector.page.scss'],\n})\nexport class DestinationSelectorPage implements OnInit {\n  \n  savedDestinations: GeocoderResult[] = [];\n  \n  constructor(private storage: NativeStorage, private loadingCtrl: LoadingController, private position: PositionService, private alarm: AlarmService,\n    private router: Router, private alertCtrl: AlertController) {\n      \n    }\n    \n    async ngOnInit() {\n      await this.presentOpeningLoading();\n      this.storage.getItem('savedDestinations').then(savedDestinations => {\n        this.savedDestinations = savedDestinations;\n        this.dismissLoading();\n      }, err => {\n        this.dismissLoading();\n      })\n    }\n    \n    async presentOpeningLoading() {\n      return new Promise(async resolve => {\n        const loading = await this.loadingCtrl.create({\n          duration: 10000\n        });\n        await loading.present();\n        resolve();\n      })\n    }\n    \n    dismissLoading(){\n      this.loadingCtrl.dismiss();    \n    }\n    \n    async showDestinationConfirmationAlert(destination:GeocoderResult){\n      const alert = await this.alertCtrl.create({\n        header: 'Enable Alarm',\n        message: '<span class=\"alert-message\">Enable the alarm for ' + destination.extra.featureName + ' ?</span>',\n        buttons: [\n          {\n            text: 'Cancel',\n            role: 'cancel',\n            cssClass: 'secondary',\n            handler: () => {\n            }\n          }, {\n            text: 'Enable',\n            cssClass: 'accept',\n            handler: () => {\n              this.enableAlarm(destination);\n            }\n          }\n        ]\n      });      \n      await alert.present();\n    }\n    \n    async enableAlarm(destination:GeocoderResult){\n      await this.presentOpeningLoading();\n      this.position.turnOnGPS().then((gpsIsOn)=> {\n        if(gpsIsOn){\n          this.position.setDestination(destination);\n          this.alarm.start();\n          this.dismissLoading();\n          this.router.navigate(['/home']);\n        }else{\n          this.dismissLoading();\n          this.showNoGPSAlert();         \n        }        \n      })      \n    }\n    \n    async showNoGPSAlert(){\n      const alert = await this.alertCtrl.create({\n        header: 'GPS Disabled',\n        message: '<span class=\"alert-message\">GPS needs to be enabled to set a destination.</span>',\n        buttons: [\n          {\n            text: 'Cancel',\n            role:'cancel',\n            handler: () => {\n            }\n          }\n        ]\n      });      \n      await alert.present();\n    }\n    \n    deleteRecentDestination(index){\n      this.savedDestinations.splice(index,1);\n      this.storage.setItem('savedDestinations', this.savedDestinations);\n    }\n    \n  }\n  \n"],"sourceRoot":""}