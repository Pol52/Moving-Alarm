{"version":3,"sources":["./src/app/destination-selector/destination-selector.page.html","./src/app/destination-selector/destination-selector-routing.module.ts","./src/app/destination-selector/destination-selector.module.ts","./src/app/destination-selector/destination-selector.page.scss","./src/app/destination-selector/destination-selector.page.ts"],"names":[],"mappings":"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","file":"destination-selector-destination-selector-module-es5.js","sourcesContent":["module.exports = \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button></ion-back-button>\\n    </ion-buttons>\\n    <ion-title>Destinations</ion-title>\\n    <ion-buttons slot=\\\"primary\\\">\\n      <ion-button color=\\\"secondary\\\" fill=\\\"clear\\\" [routerLink]=\\\"['/map']\\\">\\n        <ion-icon slot=\\\"icon-only\\\" name=\\\"add-circle\\\"></ion-icon>\\n      </ion-button>\\n    </ion-buttons>    \\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <ion-list *ngIf=\\\"savedDestinations\\\">\\n    <ion-list-header>\\n      <h5 class=\\\"list-header\\\">\\n        Recent Destinations\\n      </h5>\\n    </ion-list-header>\\n    <ion-item-sliding *ngFor=\\\"let destination of savedDestinations; let i = index\\\">\\n      <ion-item button (click)=\\\"showDestinationConfirmationAlert(destination)\\\">\\n        <ion-avatar>\\n          <img src=\\\"../../assets/images/588891debc2fc2ef3a1860a2.png\\\">\\n        </ion-avatar>\\n        <ion-label class=\\\"item-label\\\">\\n          <h2>\\n            <strong>{{destination.extra.featureName}}</strong>\\n          </h2>\\n          <h5>\\n            {{destination.subAdminArea}}\\n          </h5>\\n        </ion-label>\\n      </ion-item>\\n      <ion-item-options side=\\\"end\\\">\\n        <ion-item-option color=\\\"danger\\\" (click)=\\\"deleteRecentDestination(i)\\\">\\n          <ion-icon name=\\\"trash\\\"></ion-icon> <span>Delete</span>\\n        </ion-item-option>\\n      </ion-item-options>\\n    </ion-item-sliding>    \\n  </ion-list>\\n</ion-content>\\n\"","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { DestinationSelectorPage } from './destination-selector.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: DestinationSelectorPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class DestinationSelectorPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { DestinationSelectorPageRoutingModule } from './destination-selector-routing.module';\n\nimport { DestinationSelectorPage } from './destination-selector.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    DestinationSelectorPageRoutingModule\n  ],\n  declarations: [DestinationSelectorPage]\n})\nexport class DestinationSelectorPageModule {}\n","module.exports = \".list-header {\\n  width: 100%;\\n  text-align: center;\\n  color: var(--ion-text-color);\\n}\\n\\n.item-label {\\n  padding-left: 20px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3BvbC9EZXNrdG9wL1VOSUZJL0h1bWFuQ29tcHV0ZXJJbnRlcmFjdGlvbi9Nb3ZpbmdBbGFybS9zcmMvYXBwL2Rlc3RpbmF0aW9uLXNlbGVjdG9yL2Rlc3RpbmF0aW9uLXNlbGVjdG9yLnBhZ2Uuc2NzcyIsInNyYy9hcHAvZGVzdGluYXRpb24tc2VsZWN0b3IvZGVzdGluYXRpb24tc2VsZWN0b3IucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksV0FBQTtFQUNBLGtCQUFBO0VBQ0EsNEJBQUE7QUNDSjs7QURFQTtFQUNJLGtCQUFBO0FDQ0oiLCJmaWxlIjoic3JjL2FwcC9kZXN0aW5hdGlvbi1zZWxlY3Rvci9kZXN0aW5hdGlvbi1zZWxlY3Rvci5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIubGlzdC1oZWFkZXJ7XG4gICAgd2lkdGg6MTAwJTtcbiAgICB0ZXh0LWFsaWduOmNlbnRlcjtcbiAgICBjb2xvcjogdmFyKC0taW9uLXRleHQtY29sb3IpO1xufVxuXG4uaXRlbS1sYWJlbHtcbiAgICBwYWRkaW5nLWxlZnQ6MjBweDtcbn0iLCIubGlzdC1oZWFkZXIge1xuICB3aWR0aDogMTAwJTtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuICBjb2xvcjogdmFyKC0taW9uLXRleHQtY29sb3IpO1xufVxuXG4uaXRlbS1sYWJlbCB7XG4gIHBhZGRpbmctbGVmdDogMjBweDtcbn0iXX0= */\"","import { Component, OnInit } from '@angular/core';\nimport { NativeStorage } from '@ionic-native/native-storage/ngx';\nimport { GeocoderResult } from '@ionic-native/google-maps/ngx';\nimport { LoadingController, AlertController } from '@ionic/angular';\nimport { PositionService } from '../service/position.service';\nimport { AlarmService } from '../service/alarm.service';\nimport { Router } from '@angular/router';\n\n@Component({\n  selector: 'app-destination-selector',\n  templateUrl: './destination-selector.page.html',\n  styleUrls: ['./destination-selector.page.scss'],\n})\nexport class DestinationSelectorPage implements OnInit {\n  \n  savedDestinations: GeocoderResult[] = [];\n  \n  constructor(private storage: NativeStorage, private loadingCtrl: LoadingController, private position: PositionService, private alarm: AlarmService,\n    private router: Router, private alertCtrl: AlertController) {\n      \n    }\n    \n    async ngOnInit() {\n      await this.presentOpeningLoading();\n      this.storage.getItem('savedDestinations').then(savedDestinations => {\n        this.savedDestinations = savedDestinations;\n        this.dismissLoading();\n      }, err => {\n        this.dismissLoading();\n      })\n    }\n    \n    async presentOpeningLoading() {\n      return new Promise(async resolve => {\n        const loading = await this.loadingCtrl.create({\n          duration: 10000\n        });\n        await loading.present();\n        resolve();\n      })\n    }\n    \n    dismissLoading(){\n      this.loadingCtrl.dismiss();    \n    }\n    \n    async showDestinationConfirmationAlert(destination:GeocoderResult){\n      const alert = await this.alertCtrl.create({\n        header: 'Enable Alarm',\n        message: '<span class=\"alert-message\">Enable the alarm for ' + destination.extra.featureName + ' ?</span>',\n        buttons: [\n          {\n            text: 'Cancel',\n            role: 'cancel',\n            cssClass: 'secondary',\n            handler: () => {\n            }\n          }, {\n            text: 'Enable',\n            cssClass: 'accept',\n            handler: () => {\n              this.enableAlarm(destination);\n            }\n          }\n        ]\n      });      \n      await alert.present();\n    }\n    \n    async enableAlarm(destination:GeocoderResult){\n      await this.presentOpeningLoading();\n      this.position.turnOnGPS().then((gpsIsOn)=> {\n        if(gpsIsOn){\n          this.position.setDestination(destination);\n          this.alarm.start();\n          this.dismissLoading();\n          this.router.navigate(['/home']);\n        }else{\n          this.dismissLoading();\n          this.showNoGPSAlert();         \n        }        \n      })      \n    }\n    \n    async showNoGPSAlert(){\n      const alert = await this.alertCtrl.create({\n        header: 'GPS Disabled',\n        message: '<span class=\"alert-message\">GPS needs to be enabled to set a destination.</span>',\n        buttons: [\n          {\n            text: 'Cancel',\n            role:'cancel',\n            handler: () => {\n            }\n          }\n        ]\n      });      \n      await alert.present();\n    }\n    \n    deleteRecentDestination(index){\n      this.savedDestinations.splice(index,1);\n      this.storage.setItem('savedDestinations', this.savedDestinations);\n    }\n    \n  }\n  \n"],"sourceRoot":""}